// src/app/services/home.service.ts
import { Injectable, inject } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';
import { Destination, Offer } from '../interfaces/travel.models';
import { environment } from 'src/environments/environment';

@Injectable({
  providedIn: 'root'
})
export class HomeService {
  private http = inject(HttpClient);

  private apiUrl = environment.apiUrl;
  featuredDestinations: Destination[] = [
    {
      id: 1,
      name: 'Maldives',
      city: null,
      description: 'Tropical paradise with stunning beaches.',
      images: ['data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//EABEIAJQA1QMBIgACEQEDEQH/xAAcAAACAgMBAQAAAAAAAAAAAAAEBQIDBgABBwj/xAA9EAABAwMCBAQDBgUDBQEAAAABAgMEABEFEiExQRNRYQYUIjJxgZGhscHR8BUWQlIjYnKCkrLh8WNzgzP/xAAaAQACAwEBAAAAAAAAAAAAAAABAgADBAUG/8QAKBEAAgIBAwQCAgMBAAAAAAAAAQIAAxEEEiExQRNRYSIyFEJxgaGx/9oADAMBAAIRAxEAPwD0zTqKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA-..'],
      latitude: 3.2028,
      longitude: 73.2207,
      category: [{ id: 1, name: 'Beach', verbose_name: 'Plage' }],
    },
    {
      id: 2,
      name: 'Swiss Alps',
      city: null,
      description: 'Breathtaking mountain range for hiking and skiing.',
      images: ['data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMTEhUTExMWFhUWGRcXGBYYGBgYGBoXGBYXFxgYGBceICggGRslGxYaITEhJSkrLi4uHh8zODMsNygtLisBCgoKDg0OGxAQGysmICUtLS0tLy0tLS8tLi0tLS0tLS0tLS0tLS0tLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIALcBEwMBIgACEQEDEQH/xAAcAAACAgMBAQAAAAAAAAAAAAADBAIFBgABBwj/xAA+EAABAwIEAwUEBwYHAQAAAAABAAIRAyEEEjFBBVFhInGBkaGxBhMywdHwFEJSYnKCkrLh8SM0Q1NzgpOi/8QAGQEAAwEBAQAAAAAAAAAAAAAAAQIDAAQF/8QAJBEAAgICAgICAgMBAAAAAAAAAAECEQMhEjEEQRMiUQUyYXFC/9oADAMBAAIRAxEAPwD2pSpUqBBSlKUAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSlKAUpSgBBSl-'],
      latitude: 46.8,
      longitude: 8.2,
      category: [{ id: 2, name: 'Mountain', verbose_name: 'Montagne' }],
    },
  ];

  specialOffers: Offer[] = [
    {
      id: 1,
      destination: this.featuredDestinations[0],
      title: 'Luxury Villa in Maldives',
      description: '7-night stay in a water villa with private pool.',
      price: 3000000,
      start_date: '2025-10-01',
      end_date: '2025-10-31',
      available_slots: 10,
      created_by: null,
      cancellation_policy: 'Flexible',
    },
    {
      id: 2,
      destination: this.featuredDestinations[1],
      title: 'Ski Adventure in the Alps',
      description: 'Full-week ski pass and accommodation in a cozy chalet.',
      price: 150000,
      start_date: '2026-01-15',
      end_date: '2026-03-15',
      available_slots: 20,
      created_by: null,
      cancellation_policy: 'Moderate',
    },
  ];

  popularDestinations: Destination[] = [...this.featuredDestinations].reverse();


  getFeaturedDestinations(): Observable<Destination[]> {
    return this.http.get<Destination[]>(`${this.apiUrl}/destinations/?featured=true`);
  }

  getSpecialOffers(): Observable<Offer[]> {
    return this.http.get<Offer[]>(`${this.apiUrl}/offers/?special=true`);
  }

  getPopularDestinations(): Observable<Destination[]> {
    return this.http.get<Destination[]>(`${this.apiUrl}/destinations/?popular=true`);
  }
  getFeaturedDestinationsTest(): Destination[] {
    return this.featuredDestinations;
  }

  getSpecialOffersTest(): Offer[] {
    return this.specialOffers;
  }

  getPopularDestinationsTest(): Destination[] {
    return this.popularDestinations;
  }
}
